(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{188:function(e,t,s){"use strict";s.r(t);var a=s(0),n=Object(a.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e._m(0),e._m(1),e._m(2),e._m(3),e._m(4),e._m(5),e._m(6),s("p",[e._v("Here we have some examples (assuming that you have home controller with index/info actions in your project):")]),e._m(7),s("p",[e._v("Request paths that does not match the route rule will be treated as requests to static resources.")]),s("p",[e._v("But how to set positive rule? Look at this:")]),e._m(8),e._m(9),e._m(10),e._m(11),e._m(12),s("p",[e._v("Here are three examples:")]),e._m(13),e._m(14),e._m(15),s("p",[e._v("One thing that you should know about string negative route rule is: your rules should always start with '/'.")]),e._m(16),s("p",[e._v('What if want to ignore all routes that start with "no-route"? Should we write every possibilities? Of course, that is not possible. So we use the regular expression above to ignore all request with prefix "no-route" (upper-case or lower-case)')]),e._m(17),e._m(18),e._m(19),e._m(20),s("p",[e._v("According to "),s("a",{attrs:{href:"https://tools.ietf.org/html/rfc1738",target:"_blank",rel:"noopener noreferrer"}},[e._v("RFC 1738"),s("OutboundLink")],1),e._v(", a valid search in URL is defined as follows:")]),e._m(21),s("p",[e._v("More specificly, ServerHub allows:")]),e._m(22),s("p",[e._v('Please always obey the above rules, later versions of ServerHub might eable "strict mode" to force ignore search/query with invalid characters.')])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"route"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#route","aria-hidden":"true"}},[this._v("#")]),this._v(" Route")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Route is one of ServerHub's core features. With route, all HTTP request can be filtered and send to correct handlers. For example, "),t("code",[this._v("/index.html")]),this._v(" might be a static webpage, but "),t("code",[this._v("/home/index")]),this._v(" could be a controller URL. ServerHub's route system provide two ways to deal with it. One is called positive rules and the other one is called negative rules.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"positive-rules"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#positive-rules","aria-hidden":"true"}},[this._v("#")]),this._v(" Positive rules")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Positive rules looks like JavaScript string formatting. There are several '{' and '}' symbols in the rule content. Between each pair of parenthess lies the segment name of rule syntax. Valid segment names are: controller, action and id. For example: "),t("code",[this._v('"api/{controller}/{action}/{id}"')]),this._v(".")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Prefix "),t("code",[this._v("api")]),this._v(" is a normal string. Every request that matches the rule should start with this prefix.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("controller")]),this._v(" is the name of controller, which is right the name of the controller file.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("action")]),this._v(" is the function property defined in controller scripts.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("Valid request path:\n  /api/home/index\n  /api/home/info/\n  /api/home/index/5\n  /api/home/index/5?name=xu_wangzhe\n  /api/home/index/?name=xu_wangzhe\n\nInvalid request path:\n  /home/index\n  /api/home/index.html\n  /api/home/5\n  /api/index/5?name=xu_wangzhe\n  /api/home-foo/index/?name=xu_wangzhe\n")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[e._v("route "),s("span",{attrs:{class:"token operator"}},[e._v("=>")]),e._v(" "),s("span",{attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  route"),s("span",{attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{attrs:{class:"token function"}},[e._v("MapRoute")]),s("span",{attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{attrs:{class:"token string"}},[e._v('"default"')]),s("span",{attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{attrs:{class:"token string"}},[e._v('"v1/{controller}/{action}/{id}"')]),s("span",{attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Pass this annoymous function as the second parameter of "),t("code",[this._v("instance.Run()")]),this._v(" method.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"negative-rules"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#negative-rules","aria-hidden":"true"}},[this._v("#")]),this._v(" Negative rules")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("strong",[this._v("Negative rules are checked ahead of any positive rules")]),this._v(". If any request path matched any negative rule, it will immediately be treated as static resources.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Negative rules support "),t("strong",[this._v("both")]),this._v(" string rule definition and regular expressions. An array is used to contain all the rules needed.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"string-rule-example"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#string-rule-example","aria-hidden":"true"}},[this._v("#")]),this._v(" String rule example")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[e._v("route"),s("span",{attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{attrs:{class:"token function"}},[e._v("IgnoreRoute")]),s("span",{attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{attrs:{class:"token string"}},[e._v('"/language/all"')]),s("span",{attrs:{class:"token punctuation"}},[e._v("]")]),s("span",{attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[e._v("As you can see. The "),s("code",[e._v("language")]),e._v(" controller may have "),s("code",[e._v("english")]),e._v(" and "),s("code",[e._v("chinese")]),e._v(" actions, but "),s("code",[e._v("all")]),e._v(" is not an action. If we don't ignore this route, ServerHub will try to seek for action named "),s("code",[e._v("all")]),e._v(", which will fire an exception. So, we use this string rule to ignore specific request path.")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"regular-expression-example"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#regular-expression-example","aria-hidden":"true"}},[this._v("#")]),this._v(" Regular expression example")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[e._v("route"),s("span",{attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{attrs:{class:"token function"}},[e._v("IgnoreRoute")]),s("span",{attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{attrs:{class:"token regex"}},[e._v("/^\\/no-route.*$/i")]),s("span",{attrs:{class:"token punctuation"}},[e._v("]")]),s("span",{attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"multiple-negative-rules"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#multiple-negative-rules","aria-hidden":"true"}},[this._v("#")]),this._v(" Multiple negative rules")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[e._v("route"),s("span",{attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{attrs:{class:"token function"}},[e._v("IgnoreRoute")]),s("span",{attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{attrs:{class:"token string"}},[e._v('"/language/all"')]),s("span",{attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{attrs:{class:"token regex"}},[e._v("/^\\/no-route.*$/i")]),s("span",{attrs:{class:"token punctuation"}},[e._v("]")]),s("span",{attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"search-query-in-url"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#search-query-in-url","aria-hidden":"true"}},[this._v("#")]),this._v(" Search/Query in URL")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-rfc extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('search         = *[ uchar | ";" | ":" | "@" | "&" | "=" ]\nuchar          = unreserved | escape\nunreserved     = alpha | digit | safe | extra\nalpha          = lowalpha | hialpha\nlowalpha       = "a" | "b" | "c" | "d" | "e" | "f" | "g" | "h" |\n                 "i" | "j" | "k" | "l" | "m" | "n" | "o" | "p" |\n                 "q" | "r" | "s" | "t" | "u" | "v" | "w" | "x" |\n                 "y" | "z"\nhialpha        = "A" | "B" | "C" | "D" | "E" | "F" | "G" | "H" | "I" |\n                 "J" | "K" | "L" | "M" | "N" | "O" | "P" | "Q" | "R" |\n                 "S" | "T" | "U" | "V" | "W" | "X" | "Y" | "Z"\ndigit          = "0" | "1" | "2" | "3" | "4" | "5" | "6" | "7" |\n                 "8" | "9"\nsafe           = "$" | "-" | "_" | "." | "+"\nextra          = "!" | "*" | "\'" | "(" | ")" | ","\nescape         = "%" hex hex\nhex            = digit | "A" | "B" | "C" | "D" | "E" | "F" |\n                 "a" | "b" | "c" | "d" | "e" | "f"\n')])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[s("code",[e._v("?")]),e._v(" as the start of a search/query.")]),s("li",[e._v("Identifier before "),s("code",[e._v("=")]),e._v(" is used as search key.")]),s("li",[e._v("Identifier after "),s("code",[e._v("=")]),e._v(" is used as search value.")]),s("li",[e._v("Search items use "),s("code",[e._v("&")]),e._v(" as delimiter.")])])}],!1,null,null,null);t.default=n.exports}}]);