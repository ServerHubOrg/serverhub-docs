(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{184:function(t,s,e){"use strict";e.r(s);var a=e(0),n=Object(a.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),t._m(1),e("p",[t._v("这一章，我们会通过一个基于 ServerHub 的 helloworld 静态服务器程序来带你直观感受 ServerHub。阅读过后，欢迎你在 issues 中提意见或者在 pr 中提交合并请求。")]),t._m(2),t._m(3),e("p",[t._v("在本例中，我建议你将自己的工作目录清理得越干净越好。或者你可以直接创建一个全新的目录来作为项目空间。")]),t._m(4),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11),e("p",[t._v("妥了！现在 ServerHub 已经被安装到了你的工作目录。")]),e("p",[t._v("经过上面的步骤，你的工作空间应该像下面这样：")]),t._m(12),t._m(13),t._m(14),e("p",[t._v("修改后的代码应该如下面所示：")]),t._m(15),t._m(16),t._m(17),t._m(18),t._m(19),e("p",[t._v("上面的段落中，我们成功启动了一个 ServerHub 服务器实例，但是它显示了一个 404 错误页。我们肯定不会希望它这样子，所以跟我进行一些改动。在接下来的几分钟里，我们要深入一些看看如何使用 ServerHub 的 controller。")]),t._m(20),t._m(21),e("p",[t._v("该文件的内容如下：")]),t._m(22),e("p",[t._v("下面重启 ServerHub，并刷新浏览器页面")]),t._m(23),e("p",[t._v("诶！？！？有没有感到一丢丢奇怪？为什么会出现这样一个页面？我们完全没有改变过浏览器访问的网址呀！")]),t._m(24),t._m(25),t._m(26),e("p",[t._v("更多指南和文档，请访问 "),e("router-link",{attrs:{to:"/zh/document/"}},[t._v("ServerHub 文档集")]),t._v("。")],1),t._m(27),e("p",[e("a",{attrs:{href:"https://github.com/maoyuyang",target:"_blank",rel:"noopener noreferrer"}},[t._v("雨杨"),e("OutboundLink")],1),t._v(" 他首先提出了为 ServerHub 文档增加一个 helloworld 案例的想法，非常感谢！")])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"hello-world-例子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hello-world-例子","aria-hidden":"true"}},[this._v("#")]),this._v(" Hello World 例子")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("小贴士")]),s("p",[this._v("阅读和完成本文的所有操作大致需要 10 分钟。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("注意")]),s("p",[this._v("本文假定你的开发设备运行 Linux/Unix/macOS 操作系统，所有相关的命令都在此基础上给出。如果你使用的是 Windows 操作系统，请注意转换命令。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"配置工作目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置工作目录","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置工作目录")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("mkdir")]),this._v(" serverhub-helloworld "),s("span",{attrs:{class:"token operator"}},[this._v("&&")]),this._v(" "),s("span",{attrs:{class:"token function"}},[this._v("cd")]),this._v(" serverhub-helloworld\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("现在，用 "),s("code",[this._v("npm")]),this._v(" 来初始化空间。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" init\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("另外，你可以在 "),s("code",[this._v("npm init")]),this._v(" 后面加上 "),s("code",[this._v("-y")]),this._v(" 参数从而跳过提示问题。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"安装-serverhub"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-serverhub","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装 ServerHub")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("为了能够安装和运行 ServerHub，你 必须 要在本机安装好 "),s("strong",[this._v("Node.js")]),this._v("。在安装过程中，"),s("code",[this._v("npm")]),this._v(" 也会自动被安装。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("进行下一步之前，我需要着重强调：如果你不打算阅读或使用源代码，就"),s("strong",[this._v("一定不要")]),this._v("通过克隆 GitHub 仓库的方式来安装（因为这样你会缺少几个重要的依赖项，还需要费神自行安装，完全没有必要这样做）。正确的方法是使用 "),s("code",[this._v("npm")]),this._v("，参见下方：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" "),s("span",{attrs:{class:"token function"}},[this._v("install")]),this._v(" --save serverhub-mvc\n")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("serverhub"),e("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("helloworld"),e("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("\n├——node_modules"),e("span",{attrs:{class:"token operator"}},[t._v("/")]),t._v("\n├——app"),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("js "),e("span",{attrs:{class:"token comment"}},[t._v("// entry of server")]),t._v("\n├——"),e("span",{attrs:{class:"token keyword"}},[t._v("package")]),e("span",{attrs:{class:"token operator"}},[t._v("-")]),t._v("lock"),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json\n├——"),e("span",{attrs:{class:"token keyword"}},[t._v("package")]),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("json\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"编辑-app-js"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编辑-app-js","aria-hidden":"true"}},[this._v("#")]),this._v(" 编辑 "),s("code",[this._v("app.js")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("首先，请在其中引入 ServerHub 依赖。然后调用 "),s("code",[this._v("Run()")]),this._v(" 方法来配置 ServerHub。")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" serverhub "),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{attrs:{class:"token function"}},[t._v("require")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token string"}},[t._v('"serverhub-mvc"')]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nserverhub"),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token function"}},[t._v("Run")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  BaseDir"),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" __dirname\n"),e("span",{attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("现在，执行 "),s("code",[this._v("node app.js")]),this._v(" 来启动 ServerHub，然后到你最常用的浏览器访问“http://localhost:926”。如果一切正常，你会看到一个写着 404 错误的页面。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"/assets/helloworld-404.png",alt:"404"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("干得好！")]),this._v(" 现在你的 ServerHub 实例已经可以正常工作了！")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"对上例的拓展"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对上例的拓展","aria-hidden":"true"}},[this._v("#")]),this._v(" 对上例的拓展")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"你的第一个-controller"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#你的第一个-controller","aria-hidden":"true"}},[this._v("#")]),this._v(" 你的第一个 controller")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("默认情况下，ServerHub 在编译时（参阅 controller 文档）会将与 "),s("code",[this._v("app.js")]),this._v(" 同在一处的“controller/”目录作为搜寻 controller 的目录。所以我们需要创建这样一个文件夹，然后添加并编辑 "),s("code",[this._v("home.shc.js")]),this._v("。不要担心，这个 controller 目录是可以自己设置的，以后就会了解到了。")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("module"),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),e("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  index"),e("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{attrs:{class:"token keyword"}},[t._v("function")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),e("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" method"),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    res"),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token function"}},[t._v("write")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token string"}},[t._v('"Hello ServerHub"')]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    res"),e("span",{attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{attrs:{class:"token function"}},[t._v("end")]),e("span",{attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),e("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("img",{attrs:{src:"/assets/helloworld-controller.png",alt:"helloworld-controller"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("哈哈，这就是 ServerHub 的工作了。此时此刻，此情此景，ServerHub route 会默认匹配 home controller 中的 index 动作方法，然后触发它，接着把操作的结果返回给浏览器。你自己也可以试着改变 "),s("code",[this._v("home.shc.js")]),this._v(" 的内容，看看有什么变化。而在此情境中，浏览器的 URL“/”等价于“/home/index/”。看到没有，controller 和 route 就是那么赞 👍！")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"结语"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#结语","aria-hidden":"true"}},[this._v("#")]),this._v(" 结语")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("我们一起试着去了解怎样搭建一个 ServerHub 应用程序，你学会如何做了嘛？ServerHub 的应用程序其实非常简单，你只需要关心什么路径给出什么样的服务，并将服务对应的程式放到那个目录就好啦。至于为什么要在 "),s("code",[this._v(".js")]),this._v(" 后缀前面加上 "),s("code",[this._v(".shc.js")]),this._v(" 这是因为最早期的版本中默认支持的是动态解释执行法则，而后来的更新加入了模块方法来撰写 controller。为了保证两个版本平滑过渡，ServerHub 会持续支持一段时间，并用此附加字段来区分 controller 版本。一旦时机成熟，ServerHub 会在几个版本的警告之后停止旧的语法支持，敬请关注。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"本章贡献者列表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本章贡献者列表","aria-hidden":"true"}},[this._v("#")]),this._v(" 本章贡献者列表")])}],!1,null,null,null);s.default=n.exports}}]);